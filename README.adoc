= Asciidoctor plugin for Vim
:author: Maxim Kim
:experimental:
:toc: left
:toclevels: 3
:icons: font
:autofit-option:
:source-highlighter: rouge
:rouge-style: github
:source-linenums-option:
:revdate: 2018-11-19
:imagesdir: images

image::image1.png[]

== What about built-in asciidoc support?

Vim has only syntax highlighting for asciidoc out of the box. And it is/was
really slow for me, probably because it tries to be very smart about syntax.

This plugin on the other hand has:

* quite limited syntax highlighting;
* sections folding;
* commands to build `HTML` (using `asciidoctor`), `PDF` (using `asciidoctor-pdf`) and `DOCX` (using combination of `asciidoctor` and `pandoc`)

And it is still way faster than built-in `syntax/asciidoc.vim`, for me.

== Installation

== Setup
=== Vim
.asciidoctor
[source,vim]
--------

" What to use for HTML, default `asciidoctor`.
let g:asciidoctor_executable = 'asciidoctor'

" What extensions to use for HTML, default `[]`.
let g:asciidoctor_extensions = ['asciidoctor-diagram', 'asciidoctor-rouge']

--------

.asciidoctor-pdf
[source,vim]
--------

" What to use for PDF, default `asciidoctor-pdf`.
let g:asciidoctor_pdf_executable = 'asciidoctor-pdf'

" What extensions to use for PDF, default `[]`.
let g:asciidoctor_pdf_extensions = ['asciidoctor-diagram']

" Path to PDF themes, default `''`.
let g:asciidoctor_pdf_themes_path = '~/docs/AsciiDocThemes'

" Path to PDF fonts, default `''`.
let g:asciidoctor_pdf_fonts_path = '~/docs/AsciiDocThemes/fonts'

--------

.asciidoctor-docx
[source,vim]
--------

" What to use for DOCX, default `pandoc`.
" The DOCX 'compilation' process is to generate `docbook` using
" `g:asciidoctor-executable` and then to generate DOCX out of `docbook`
" using `pandoc`.
let g:asciidoctor_pandoc_executable = 'pandoc'

--------

.folding
[source,vim]
--------

" Fold sections, default `0`.
let g:asciidoctor_folding = 1

" Fold options, default `0`.
let g:asciidoctor_fold_options = 1

--------

.Syntax highlighting for other languages in [source] blocks
[source,vim]
--------

" List of filetypes to highlight, default `[]`
let g:asciidoctor_fenced_languages = ['python', 'c', 'javascript']

--------

.default mappings... there are no default mappings
[source,vim]
--------

" Function to create buffer local mappings
fun! AsciidoctorMappings()
	nnoremap <buffer> <leader>oo :AsciidoctorOpenRAW<CR>
	nnoremap <buffer> <leader>op :AsciidoctorOpenPDF<CR>
	nnoremap <buffer> <leader>oh :AsciidoctorOpenHTML<CR>
	nnoremap <buffer> <leader>ox :AsciidoctorOpenDOCX<CR>
	nnoremap <buffer> <leader>ch :Asciidoctor2HTML<CR>
	nnoremap <buffer> <leader>cp :Asciidoctor2PDF<CR>
	nnoremap <buffer> <leader>cx :Asciidoctor2DOCX<CR>
endfun

" Call AsciidoctorMappings for all `*.adoc` and `*.asciidoc` files
augroup asciidoctor
	au!
	au BufEnter *.adoc,*.asciidoc call AsciidoctorMappings()
augroup END

--------

=== Asciidoctor
// TODO: setup asciidoctor <2018-09-20 11:09>

== Commands

All commands are buffer local -- available only for asciidoctor files (`set filetype=asciidoctor`)

* `Asciidoctor2HTML` -- convert current file to `HTML`.
* `Asciidoctor2PDF` -- convert current file to `PDF`
* `Asciidoctor2DOCX` -- convert current file to `DOCX`
* `AsciidoctorOpenRAW` -- open current file in a browser. Chrome and Firefox has extentsions to render barebone `adoc` files.
* `AsciidoctorOpenPDF` -- open `PDF` of the current file using default PDF viewer.
* `AsciidoctorOpenHTML` -- open `HTML` of the current file using default web browser.
* `AsciidoctorOpenDOCX` -- open `DOCX` of the current file using default DOCX
  viewer. (I haven't tried it with LibreOffice or whatever else there might be.
  Also haven't tried it on linux and OSX...)

== Usage

1. Open `~/test.adoc`
2. Enter:
+
[literal]
.........

= Asciidoctor Title: Hanging around

This is the first para and it will be rendered with bigger text.

== Section 1

Text of section 1

== Section 2

Text of section 2

.........

3. Save it and export to `HTML`
+
[literal]
.........

:w<CR>
:Asciidoctor2HTML<CR>

.........

4. Open the `HTML` file:
+
[literal]
.........

:AsciidoctorOpenHTML<CR>

.........
+
That should look something like this:

image::test_html.png[]


If you use `:Asciidoctor2DOCX` and `:AsciidoctorOpenDOCX` commands instead, you
should see something like this (provided you have `pandoc` and `MSWord`
installed:)

image::test_docx.png[]


And if you use `:Asciidoctor2PDF` and `:AsciidoctorOpenPDF` commands, you
should see something like this (I have my own default theme and fonts, so you
probably see it a bit different) :

.title page
image::test_pdf1.png[]

.first page
image::test_pdf2.png[]

// add some short youtube videos

